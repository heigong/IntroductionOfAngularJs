<!DOCTYPE html>
<html ng-app="TodoList">
<head>
	<!-- To show basic of html, javascript and css -->
    <title>Simple ToDo List</title>
	<link href="bootstrap.css" rel="stylesheet" />
	<link href="bootstrap-theme.css" rel="stylesheet" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="angular.js"></script>

	<script>
		// Add your code here
	var app = angular.module('TodoList', []);
	app.controller('TodoCtrl', function($scope, $http){
		$scope.username = "John";
		
		$http.get('todo/todo.json').success(function(data){
			$scope.tasks = data;
		});
			
			$scope.incompleteCount = function(){
				var count = 0;
				angular.forEach($scope.tasks, function(task){
					if(!task.done){
						count += 1;
					}
				});
				return count;
			}
			
			$scope.warningLevelClass = function(){
				if($scope.incompleteCount() > 2)
					return 'label-warning';
				
				return 'label-success';
			}
			
			$scope.addNewTask = function(){
				$scope.tasks.push({action: $scope.newAction, done:false});
				$scope.newAction = '';
			}
	});
	</script>
	
</head>
<body ng-controller="TodoCtrl">
    <div class="page-header">
		<h1>{{username}}'s To Do List
		<span class="label" ng-class="warningLevelClass()" ng-hide="incompleteCount() == 0">{{incompleteCount()}}</span>
		</h1>
    </div>
    <div class="panel">
        <div class="input-group">
			<input class="form-control" ng-model="newAction"/>
				<span class="input-group-btn">
					<button class="btn btn-default" ng-click="addNewTask()">Add</button>
		   </span>
		</div>
		<table class="table table-striped">
	        <thead>
                <tr>
                    <th>Description</th>
                    <th>Done</th>
                </tr>
            </thead>
            <tbody>
				<tr ng-repeat="task in tasks | orderBy: 'action'">
					<td>{{task.action}}</td>
					<td><input type="checkbox" ng-model="task.done"></td>
					<td>{{task.done}}</td>
				</tr>
			</tbody>
		</table>
    </div>
</body>
</html>